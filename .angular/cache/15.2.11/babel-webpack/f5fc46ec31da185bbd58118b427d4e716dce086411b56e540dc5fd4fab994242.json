{"ast":null,"code":"import { Area } from './core/shared/enums/area.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./core/shared/services/reporte.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./core/shared/components/header/header.component\";\nimport * as i5 from \"./core/shared/components/footer/footer.component\";\nimport * as i6 from \"./core/shared/components/ventana-ayuda/ventana-ayuda.component\";\nimport * as i7 from \"./core/shared/components/atencion-clientes/atencion-clientes.component\";\nimport * as i8 from \"./core/shared/components/como-pagar/como-pagar.component\";\nimport * as i9 from \"./core/shared/components/resultado-reporte/resultado-reporte.component\";\nimport * as i10 from \"./core/shared/components/consultar-reporte/consultar-reporte.component\";\nimport * as i11 from \"./core/shared/components/menu-ayuda/menu-ayuda.component\";\nimport * as i12 from \"./core/shared/components/reporte-categorias/reporte-categorias.component\";\nimport * as i13 from \"./core/shared/components/reporte-subcategorias/reporte-subcategorias.component\";\nimport * as i14 from \"./core/shared/components/formulario-reporte/formulario-reporte.component\";\nimport * as i15 from \"./core/shared/components/resultado-final-reporte/resultado-final-reporte.component\";\nfunction AppComponent_app_ventana_ayuda_7_app_menu_ayuda_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-menu-ayuda\", 12);\n    i0.ɵɵlistener(\"opcionSeleccionada\", function AppComponent_app_ventana_ayuda_7_app_menu_ayuda_1_Template_app_menu_ayuda_opcionSeleccionada_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.seleccionarOpcion($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_reporte_categorias_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-reporte-categorias\", 13);\n    i0.ɵɵlistener(\"categoriaSeleccionada\", function AppComponent_app_ventana_ayuda_7_app_reporte_categorias_2_Template_app_reporte_categorias_categoriaSeleccionada_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.onCategoriaSeleccionada($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_reporte_subcategorias_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-reporte-subcategorias\", 14);\n    i0.ɵɵlistener(\"subcategoriaSeleccionada\", function AppComponent_app_ventana_ayuda_7_app_reporte_subcategorias_3_Template_app_reporte_subcategorias_subcategoriaSeleccionada_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.onSubcategoriaSeleccionada($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"categoria\", ctx_r3.categoriaSeleccionada);\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_formulario_reporte_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-formulario-reporte\", 15);\n    i0.ɵɵlistener(\"enviar\", function AppComponent_app_ventana_ayuda_7_app_formulario_reporte_4_Template_app_formulario_reporte_enviar_0_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.onReporteGuardado($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"categoria\", ctx_r4.categoriaSeleccionada)(\"subcategoria\", ctx_r4.subcategoriaSeleccionada);\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_atencion_clientes_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-atencion-clientes\", 16);\n    i0.ɵɵlistener(\"regresar\", function AppComponent_app_ventana_ayuda_7_app_atencion_clientes_5_Template_app_atencion_clientes_regresar_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.regresarAlMenu());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_como_pagar_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-como-pagar\", 16);\n    i0.ɵɵlistener(\"regresar\", function AppComponent_app_ventana_ayuda_7_app_como_pagar_6_Template_app_como_pagar_regresar_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.regresarAlMenu());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_consultar_reporte_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-consultar-reporte\", 17);\n    i0.ɵɵlistener(\"buscar\", function AppComponent_app_ventana_ayuda_7_app_consultar_reporte_7_Template_app_consultar_reporte_buscar_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.buscarFolio($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_resultado_reporte_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-resultado-reporte\", 18);\n    i0.ɵɵlistener(\"regresar\", function AppComponent_app_ventana_ayuda_7_app_resultado_reporte_8_Template_app_resultado_reporte_regresar_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.regresarAlMenu());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"folio\", ctx_r8.folioBuscado);\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_app_resultado_final_reporte_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-resultado-final-reporte\", 16);\n    i0.ɵɵlistener(\"regresar\", function AppComponent_app_ventana_ayuda_7_app_resultado_final_reporte_9_Template_app_resultado_final_reporte_regresar_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.regresarAlMenu());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_app_ventana_ayuda_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-ventana-ayuda\", 4);\n    i0.ɵɵlistener(\"cerrar\", function AppComponent_app_ventana_ayuda_7_Template_app_ventana_ayuda_cerrar_0_listener($event) {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.toggleVentana($event));\n    });\n    i0.ɵɵtemplate(1, AppComponent_app_ventana_ayuda_7_app_menu_ayuda_1_Template, 1, 0, \"app-menu-ayuda\", 5);\n    i0.ɵɵtemplate(2, AppComponent_app_ventana_ayuda_7_app_reporte_categorias_2_Template, 1, 0, \"app-reporte-categorias\", 6);\n    i0.ɵɵtemplate(3, AppComponent_app_ventana_ayuda_7_app_reporte_subcategorias_3_Template, 1, 1, \"app-reporte-subcategorias\", 7);\n    i0.ɵɵtemplate(4, AppComponent_app_ventana_ayuda_7_app_formulario_reporte_4_Template, 1, 2, \"app-formulario-reporte\", 8);\n    i0.ɵɵtemplate(5, AppComponent_app_ventana_ayuda_7_app_atencion_clientes_5_Template, 1, 0, \"app-atencion-clientes\", 9);\n    i0.ɵɵtemplate(6, AppComponent_app_ventana_ayuda_7_app_como_pagar_6_Template, 1, 0, \"app-como-pagar\", 9);\n    i0.ɵɵtemplate(7, AppComponent_app_ventana_ayuda_7_app_consultar_reporte_7_Template, 1, 0, \"app-consultar-reporte\", 10);\n    i0.ɵɵtemplate(8, AppComponent_app_ventana_ayuda_7_app_resultado_reporte_8_Template, 1, 1, \"app-resultado-reporte\", 11);\n    i0.ɵɵtemplate(9, AppComponent_app_ventana_ayuda_7_app_resultado_final_reporte_9_Template, 1, 0, \"app-resultado-final-reporte\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"menu\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"reporte-categorias\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"reporte-subcategorias\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"formulario-reporte\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"atencion\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"pagos\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"consulta-folio\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"resultado-consulta\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.vistaActual === \"resultado-reporte\");\n  }\n}\nexport class AppComponent {\n  constructor(reporteService) {\n    this.reporteService = reporteService;\n    // Controla si la ventana de ayuda está abierta\n    this.ventanaAbierta = false;\n    // Guarda qué vista se debe mostrar dentro de la ventana\n    this.vistaActual = 'menu';\n    // menu | reporte-categorias | reporte-subcategorias | formulario-reporte |\n    // atencion | pagos | consulta-folio | resultado-consulta\n    this.categoriaSeleccionada = null;\n    this.subcategoriaSeleccionada = null;\n    this.folioBuscado = '';\n  }\n  // Abre o cierra la ventana flotante\n  toggleVentana(event) {\n    debugger;\n    this.ventanaAbierta = !this.ventanaAbierta;\n    if (!this.ventanaAbierta) {\n      this.vistaActual = 'menu'; // al cerrar regresa al inicio\n    }\n  }\n  // Cuando el usuario elige una opción principal\n  seleccionarOpcion(opcion) {\n    debugger;\n    this.vistaActual = opcion;\n  }\n  // Cuando el usuario elige una CATEGORÍA en el módulo de reportes\n  onCategoriaSeleccionada(categoria) {\n    this.categoriaSeleccionada = categoria;\n    this.vistaActual = 'reporte-subcategorias';\n  }\n  // Cuando el usuario elige una SUBCATEGORÍA\n  onSubcategoriaSeleccionada(subcategoria) {\n    this.subcategoriaSeleccionada = subcategoria;\n    this.vistaActual = 'formulario-reporte';\n  }\n  // Cuando el formulario de reporte se envía correctamente\n  onReporteGuardado(event) {\n    debugger;\n    const codigo = Math.floor(1000 + Math.random() * 9000);\n    const reporteRequest = {\n      folio: `Rep-${codigo}-${codigo}`,\n      nombre: event.nombre,\n      telefono: event.telefono,\n      categoria: event.categoria,\n      subcategoria: event.subcategoria,\n      ubicacion: event.ubicacion,\n      descripcion: '',\n      evidencia_url: event.evidencia,\n      estado: 'pendiente',\n      fecha: new Date(),\n      usuario_asignado: '',\n      area: this.asignarArea(event.categoria)\n    };\n    this.crearReporte(reporteRequest);\n  }\n  asignarArea(categoria) {\n    switch (categoria) {\n      case \"CHEQUEO TOMA DE AGUA\":\n        return Area.CHEQUEO_TOMA_AGUA;\n      case \"FUGA DE AGUA\":\n        return Area.FUGAS;\n      case \"DESAZOLVE\":\n        return Area.DESAZOLVE;\n      case \"CONSTRUCCIÓN\":\n        return Area.CONSTRUCCION;\n      case \"SUMINISTRO\":\n        return Area.SUMINISTRO;\n      case \"AGUA TURBIA\":\n        return Area.AGUA_TURBIA;\n      default:\n        return '';\n    }\n  }\n  // Para regresar a menú desde cualquier sección\n  regresarAlMenu() {\n    this.vistaActual = 'menu';\n  }\n  // Para buscar un reporte por folio\n  buscarFolio(folio) {\n    this.folioBuscado = folio;\n    this.vistaActual = 'resultado-consulta';\n  }\n  // Crear reporte\n  crearReporte(reporte) {\n    this.reporteService.createReporte(reporte).subscribe({\n      next: data => {\n        console.log(data);\n        this.vistaActual = 'resultado-reporte';\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.ReporteService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 8,\n      vars: 1,\n      consts: [[1, \"app-container\"], [1, \"app-content\"], [1, \"btn-flotante\", 3, \"click\"], [3, \"cerrar\", 4, \"ngIf\"], [3, \"cerrar\"], [3, \"opcionSeleccionada\", 4, \"ngIf\"], [3, \"categoriaSeleccionada\", 4, \"ngIf\"], [3, \"categoria\", \"subcategoriaSeleccionada\", 4, \"ngIf\"], [3, \"categoria\", \"subcategoria\", \"enviar\", 4, \"ngIf\"], [3, \"regresar\", 4, \"ngIf\"], [3, \"buscar\", 4, \"ngIf\"], [3, \"folio\", \"regresar\", 4, \"ngIf\"], [3, \"opcionSeleccionada\"], [3, \"categoriaSeleccionada\"], [3, \"categoria\", \"subcategoriaSeleccionada\"], [3, \"categoria\", \"subcategoria\", \"enviar\"], [3, \"regresar\"], [3, \"buscar\"], [3, \"folio\", \"regresar\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵelement(1, \"app-header\");\n          i0.ɵɵelementStart(2, \"main\", 1);\n          i0.ɵɵelement(3, \"router-outlet\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(4, \"app-footer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_5_listener() {\n            return ctx.toggleVentana();\n          });\n          i0.ɵɵtext(6, \" ?\\n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, AppComponent_app_ventana_ayuda_7_Template, 10, 9, \"app-ventana-ayuda\", 3);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.ventanaAbierta);\n        }\n      },\n      dependencies: [i2.NgIf, i3.RouterOutlet, i4.HeaderComponent, i5.FooterComponent, i6.VentanaAyudaComponent, i7.AtencionClientesComponent, i8.ComoPagarComponent, i9.ResultadoReporteComponent, i10.ConsultarReporteComponent, i11.MenuAyudaComponent, i12.ReporteCategoriasComponent, i13.ReporteSubcategoriasComponent, i14.FormularioReporteComponent, i15.ResultadoFinalReporteComponent],\n      styles: [\".btn-flotante[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 25px;\\n  right: 25px;\\n  background: #673ab7;\\n  color: white;\\n  width: 55px;\\n  height: 55px;\\n  border-radius: 50%;\\n  border: none;\\n  font-size: 24px;\\n  cursor: pointer;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\\n  transition: 0.3s;\\n}\\n\\n.btn-flotante[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLHlDQUFBO0VBQ0EsZ0JBQUE7QUFDSjs7QUFFQTtFQUNJLHFCQUFBO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLWZsb3RhbnRlIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogMjVweDtcclxuICAgIHJpZ2h0OiAyNXB4O1xyXG4gICAgYmFja2dyb3VuZDogIzY3M2FiNztcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHdpZHRoOiA1NXB4O1xyXG4gICAgaGVpZ2h0OiA1NXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XHJcbiAgICB0cmFuc2l0aW9uOiAwLjNzO1xyXG59XHJcblxyXG4uYnRuLWZsb3RhbnRlOmhvdmVyIHtcclxuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["Area","i0","AppComponent","constructor","reporteService","toggleVentana","event","ventanaAbierta","vistaActual","seleccionarOpcion","opcion","onCategoriaSeleccionada","categoria","categoriaSeleccionada","onSubcategoriaSeleccionada","subcategoria","subcategoriaSeleccionada","onReporteGuardado","codigo","Math","floor","random","reporteRequest","folio","nombre","telefono","ubicacion","descripcion","evidencia_url","evidencia","estado","fecha","Date","usuario_asignado","area","asignarArea","crearReporte","CHEQUEO_TOMA_AGUA","FUGAS","DESAZOLVE","CONSTRUCCION","SUMINISTRO","AGUA_TURBIA","regresarAlMenu","buscarFolio","folioBuscado","reporte","createReporte","subscribe","next","data","console","log","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Gerardo\\Documents\\Proyectos\\odapas\\odapas-reportes-front\\src\\app\\app.component.ts","C:\\Users\\Gerardo\\Documents\\Proyectos\\odapas\\odapas-reportes-front\\src\\app\\app.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ReporteService } from './core/shared/services/reporte.service';\nimport { Area } from './core/shared/enums/area.enum';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\n  // Controla si la ventana de ayuda está abierta\n  ventanaAbierta: boolean = false;\n\n  // Guarda qué vista se debe mostrar dentro de la ventana\n  vistaActual: string = 'menu';\n  // menu | reporte-categorias | reporte-subcategorias | formulario-reporte |\n  // atencion | pagos | consulta-folio | resultado-consulta\n\n  categoriaSeleccionada: any = null;\n  subcategoriaSeleccionada: any = null;\n  folioBuscado: string = '';\n\n  constructor(private reporteService: ReporteService) { }\n\n  // Abre o cierra la ventana flotante\n  toggleVentana(event?: any) {\n    debugger\n    this.ventanaAbierta = !this.ventanaAbierta;\n    if (!this.ventanaAbierta) {\n      this.vistaActual = 'menu'; // al cerrar regresa al inicio\n    }\n  }\n\n  // Cuando el usuario elige una opción principal\n  seleccionarOpcion(opcion: any) {\n    debugger\n    this.vistaActual = opcion;\n  }\n\n  // Cuando el usuario elige una CATEGORÍA en el módulo de reportes\n  onCategoriaSeleccionada(categoria: any) {\n    this.categoriaSeleccionada = categoria;\n    this.vistaActual = 'reporte-subcategorias';\n  }\n\n  // Cuando el usuario elige una SUBCATEGORÍA\n  onSubcategoriaSeleccionada(subcategoria: any) {\n    this.subcategoriaSeleccionada = subcategoria;\n    this.vistaActual = 'formulario-reporte';\n  }\n\n  // Cuando el formulario de reporte se envía correctamente\n  onReporteGuardado(event: any) {\n    debugger\n    const codigo = Math.floor(1000 + Math.random() * 9000);\n\n    const reporteRequest = {\n      folio: `Rep-${codigo}-${codigo}`,\n      nombre: event.nombre,\n      telefono: event.telefono,\n      categoria: event.categoria,\n      subcategoria: event.subcategoria,\n      ubicacion: event.ubicacion,\n      descripcion: '',\n      evidencia_url: event.evidencia,\n      estado: 'pendiente',\n      fecha: new Date(),\n      usuario_asignado: '',\n      area: this.asignarArea(event.categoria),\n    }\n    this.crearReporte(reporteRequest);\n  }\n\n  asignarArea(categoria: string) {\n    switch (categoria) {\n      case \"CHEQUEO TOMA DE AGUA\":\n        return Area.CHEQUEO_TOMA_AGUA;\n      case \"FUGA DE AGUA\":\n        return Area.FUGAS;\n      case \"DESAZOLVE\":\n        return Area.DESAZOLVE;\n      case \"CONSTRUCCIÓN\":\n        return Area.CONSTRUCCION;\n      case \"SUMINISTRO\":\n        return Area.SUMINISTRO;\n      case \"AGUA TURBIA\":\n        return Area.AGUA_TURBIA\n      default:\n        return '';\n    }\n  }\n\n  // Para regresar a menú desde cualquier sección\n  regresarAlMenu() {\n    this.vistaActual = 'menu';\n  }\n\n  // Para buscar un reporte por folio\n  buscarFolio(folio: any) {\n    this.folioBuscado = folio;\n    this.vistaActual = 'resultado-consulta';\n  }\n\n  // Crear reporte\n  crearReporte(reporte: any) {\n    this.reporteService.createReporte(reporte).subscribe({\n      next: (data) => {\n        console.log(data);\n        this.vistaActual = 'resultado-reporte';\n      },\n      error: (error) => {\n        console.log(error);\n      }\n    })\n  }\n}","<div class=\"app-container\">\r\n  <app-header />\r\n  <main class=\"app-content\">\r\n    <router-outlet></router-outlet>\r\n  </main>\r\n\r\n  <app-footer />\r\n\r\n</div>\r\n\r\n<!-- BOTÓN FLOTANTE -->\r\n<button class=\"btn-flotante\" (click)=\"toggleVentana()\">\r\n  ?\r\n</button>\r\n\r\n<!-- VENTANA DE AYUDA -->\r\n<app-ventana-ayuda *ngIf=\"ventanaAbierta\" (cerrar)=\"toggleVentana($event)\">\r\n  <!-- MENÚ PRINCIPAL -->\r\n  <app-menu-ayuda *ngIf=\"vistaActual === 'menu'\" (opcionSeleccionada)=\"seleccionarOpcion($event)\">\r\n  </app-menu-ayuda>\r\n\r\n  <!-- REPORTAR PROBLEMA › CATEGORÍAS -->\r\n  <app-reporte-categorias *ngIf=\"vistaActual === 'reporte-categorias'\"\r\n    (categoriaSeleccionada)=\"onCategoriaSeleccionada($event)\">\r\n  </app-reporte-categorias>\r\n\r\n  <!-- REPORTAR PROBLEMA › SUBCATEGORÍAS -->\r\n  <app-reporte-subcategorias *ngIf=\"vistaActual === 'reporte-subcategorias'\" [categoria]=\"categoriaSeleccionada\"\r\n    (subcategoriaSeleccionada)=\"onSubcategoriaSeleccionada($event)\">\r\n  </app-reporte-subcategorias>\r\n\r\n  <!-- FORMULARIO PARA GENERAR REPORTE -->\r\n  <app-formulario-reporte *ngIf=\"vistaActual === 'formulario-reporte'\" [categoria]=\"categoriaSeleccionada\"\r\n    [subcategoria]=\"subcategoriaSeleccionada\" (enviar)=\"onReporteGuardado($event)\">\r\n  </app-formulario-reporte>\r\n\r\n  <!-- MENÚ ATENCIÓN A CLIENTES -->\r\n  <app-atencion-clientes *ngIf=\"vistaActual === 'atencion'\" (regresar)=\"regresarAlMenu()\">\r\n  </app-atencion-clientes>\r\n\r\n  <!-- GUÍA DE PAGOS -->\r\n  <app-como-pagar *ngIf=\"vistaActual === 'pagos'\" (regresar)=\"regresarAlMenu()\">\r\n  </app-como-pagar>\r\n\r\n  <!-- CONSULTAR FOLIO -->\r\n  <app-consultar-reporte *ngIf=\"vistaActual === 'consulta-folio'\" (buscar)=\"buscarFolio($event)\">\r\n  </app-consultar-reporte>\r\n\r\n  <!-- RESULTADO DE CONSULTA -->\r\n  <app-resultado-reporte *ngIf=\"vistaActual === 'resultado-consulta'\" [folio]=\"folioBuscado\"\r\n    (regresar)=\"regresarAlMenu()\">\r\n  </app-resultado-reporte>\r\n\r\n\r\n  <!-- MENSAJE FINAL DE REPORTE ENVIADO -->\r\n  <app-resultado-final-reporte *ngIf=\"vistaActual === 'resultado-reporte'\" (regresar)=\"regresarAlMenu()\">\r\n  </app-resultado-final-reporte>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}